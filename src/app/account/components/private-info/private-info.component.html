<div class="row">
  <div class="col-8">
    <app-content-box
      class="content-box content-box-account w-100"
      headerText="Account Info"
    >
      <form
        [formGroup]="accountInfoForm"
        class="fz-24"
        *ngIf="getUserInfo$ | async"
        (ngSubmit)="updateUserInfo()"
      >
        <div formGroupName="userdata" class="mb-4">
          <h3 class="fz-31 fw-bold mb-4">Personal Info</h3>
          <div class="row mb-4">
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>First Name</mat-label>
                <input matInput formControlName="firstname" />
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>Last Name</mat-label>
                <input matInput formControlName="lastname" />
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>Mobile Phone</mat-label>
                <input matInput formControlName="mobilephone" />
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field appearance="fill" class="d-block">
                <mat-label>Birthday</mat-label>
                <input
                  matInput
                  [matDatepicker]="picker"
                  formControlName="bday"
                />
                <mat-datepicker-toggle
                  matSuffix
                  [for]="picker"
                ></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
              </mat-form-field>
            </div>
          </div>

          <h3 class="fz-31 fw-bold mb-4">Address</h3>
          <div class="row">
            <div class="col-8">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>Address</mat-label>
                <input matInput formControlName="address" />
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>City</mat-label>
                <input matInput formControlName="city" />
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>State</mat-label>
                <input matInput formControlName="state" />
              </mat-form-field>
            </div>
            <div class="col-4">
              <mat-form-field class="d-block" appearance="fill">
                <mat-label>Postal</mat-label>
                <input matInput formControlName="zip" />
              </mat-form-field>
            </div>
          </div>
        </div>

        <div formGroupName="subscription" class="mb-5">
          <div class="mb-4">
            <div class="fw-bold mb-3">Newsletter</div>
            <mat-checkbox class="example-margin" formControlName="email"
              >Subscribe to our marketing material via email</mat-checkbox
            >
          </div>
          <div class="fw-bold mb-3">Subscribed to SMS</div>
          <mat-checkbox class="example-margin" formControlName="sms"
            >Subscribe to our SMS notifications</mat-checkbox
          >
        </div>

        <div class="text-center">
          <button class="btn-clear btn-main py-1 mx-2">
            <span class="btn-main-text">Update</span>
          </button>
        </div>
      </form>
    </app-content-box>
  </div>
  <div class="col-4">
    <app-content-box
      class="content-box-vip mb-5 fz-24 hovercss-float-shadow"
      headerText="Vip"
    >
      <div *ngIf="getUserInfo$ | async as userInfo" class="fz-45 fw-bold">
        {{ userInfo?.vip?.level }}
      </div>
    </app-content-box>

    <app-content-box
      class="content-box-change-password mb-5 fz-24"
      headerText="Change Password"
    >
      <form
        [formGroup]="changePasswordForm"
        (ngSubmit)="changePassword()"
        #changePasswordFormEl
      >
        <mat-form-field class="d-block mb-2" appearance="fill">
          <mat-label>Current Password</mat-label>
          <input
            type="password"
            autocomplete="current-password"
            matInput
            formControlName="currentpassword"
          />
        </mat-form-field>
        <mat-form-field class="d-block mb-2" appearance="fill">
          <mat-label>New Password</mat-label>
          <input
            type="password"
            autocomplete="new-password"
            matInput
            formControlName="newpassword"
          />
          <mat-error>
            <app-form-error-message
              [control]="changePasswordForm.get('newpassword')"
            ></app-form-error-message>
          </mat-error>
        </mat-form-field>
        <mat-form-field class="d-block mb-2" appearance="fill">
          <mat-label>Verify Password</mat-label>
          <input
            type="password"
            auto="new-password"
            matInput
            formControlName="verifypassword"
          />
          <mat-error>
            <app-form-error-message
              [control]="changePasswordForm.get('verifypassword')"
            ></app-form-error-message>
          </mat-error>
        </mat-form-field>

        <div class="text-center">
          <button class="btn-clear btn-main py-1 mx-2">
            <span class="btn-main-text">Change</span>
          </button>
        </div>
      </form>
    </app-content-box>

    <app-account-funds
      class="content-box content-box-funds d-block hovercss-float-shadow"
    ></app-account-funds>
  </div>
</div>
